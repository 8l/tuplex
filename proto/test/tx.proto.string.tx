module tx.proto.string

public final type CString<L:UInt> derives Array<~UByte,(L)> {
    
    ##public static func length() UInt { return L }

    public func toInt() Int { return self^[0] }
}

public EMPTY_STRING : CString<1> = c""

func main() Int {
    str : ~CString<10> ##= { 1, 2, 3 }
    str[0] = UByte(str.L)
    return str.toInt(&str)
}
